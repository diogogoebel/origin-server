%h1.invisible= I18n.t(:Create_a_New_Application)
= breadcrumb_for_create_application(@type_groups[0][0])
= app_wizard_steps_create 0, :active => true
= flashes

%section.row
  .span6
    %p.larger!= I18n.t(:app_create_caption_1)

    %form.form-search.form-search-block{:id => 'form-search-create-apps', :method => 'get'}
      %label.invisible{:for => 'search'}!= I18n.t(:app_create_search)
      %input.search-query{:type => 'text', :id => 'search', :name => 'search', :placeholder => I18n.t(:app_create_search)}
      %button.search.font-icon{:type => 'submit', "aria-hidden" => "true", "data-icon" => "\uee03"} 

    - if @browse_tags.present?
      %span.dropdown
        %a.btn.dropdown-toggle{:href => '#', :data => {:toggle => 'dropdown'}}
          = I18n.t(:browse_by_tag)
          %span.font-icon{"aria-hidden" => "true", "data-icon" => "\uee12"}
        %ul.dropdown-menu#tag-filter
          - @browse_tags.each do |(name, tag)|
            - if name
              %li= link_to name, application_types_path(:tag => tag)
            - else
              %hr
  .span6
    %dl.font-icon-legend
      %dt
        %span.font-icon{"aria-hidden" => "true", "data-icon" => "\ue021"}
        Cartridge
      %dd= I18n.t(:app_create_cart_caption)
      %dt
        %span.font-icon{"aria-hidden" => "true", "data-icon" => "\ue029"}
        QuickStart
      %dd= I18n.t(:app_create_quickstart_caption)

%section
  - if @type_groups.length == 1

    - title, types = @type_groups.first

    %h3.divide
      #{title}
      - if types.length > 4
        %small= link_to I18n.t(:app_create_see_all), application_types_path
    .row
      - in_columns_of(2, types).each do |types|
        .span6.tile-dark
          = render :partial => 'application_type', :collection => types, :locals => {:excluded_tags => []}

  - else
    .row
      - in_balanced_columns_of(2, @type_groups).each do |groups|
        .span6
          - groups.each do |(title, types)|
            %h3.divide= title
            = render :collection => types, :locals => {:excluded_tags => []}

  %p #{link_to I18n.t(:see_all_app_types), application_types_path}

%section
  %p
    =I18n.t(:search_caption)
    -#%p
      Can't find what you're looking for? #{link_to "Browse the Quickstarts", community_quickstarts_url} 
      on our community, or #{link_to "create your own!", create_quickstart_url}

- content_for :javascripts do
  :javascript
    jQuery('.tile-click').click(function(evt) {
      if (evt.target.type == 'a') return;
      a = $('h3 > a', this)[0];
      window.location = a.href
    });
