- content_for :title, "Billing"
- breadcrumb_for_account 'Billing'

= flashes

//.row.billing-history
//  .span6
//    %section
//      %h2 Recent Activity
//
//      %dl
//        %dt
//          You have no invoices yet
//        %dd
//
//        %dt Payments
//        %dd US$ 0.0
//
//        %dt
//          %big Current Balance
//        %dd US$ 0.0

//.span6
//  %section
//    %h2 Billing Address
//
//    %ul.unstyled
//        %li Nagib Couto Kanaan
//        %li (53) 81510220 
//        %li Rua Dr. Boaventura Leite, 191
//        %li CEP 96080-480
//
//    .btn-toolbar
//      = link_to "Edit address...", edit_address_path, :class => 'btn btn-small btn-danger'

.row.billing-history
  .span12
    %section
      %h2 Billing History

      %table.table.table-fixed
        %thead
          %tr
            %th{:scope => 'col'} Id
            %th{:scope => 'col'} Month
            %th{:scope => 'col'} Processed
            %th{:scope => 'col'} Due Date
            %th{:scope => 'col'} Status
            %th{:scope => 'col'} Amount (#{@currency})
            %th{:scope => 'col'} PDF
        %tbody
          - @history.each do |h|
            %tr
              %td
                = link_to "#{h[:number]}", billing_path(h[:number])
              - ref_date = !h[:ref_date].nil? ? Date.strptime("#{h[:ref_date]}","%Y-%m-%d").strftime("%h, %Y") : '-'
              %td #{ref_date}
              - proc_date = !h[:proc_date].nil? ? Date.strptime("#{h[:proc_date]}","%Y-%m-%d").strftime("%h %d, %Y") : '-'
              %td #{proc_date}
              - due_date = !h[:due_date].nil? ? Date.strptime("#{h[:due_date]}","%Y-%m-%d").strftime("%h %d, %Y") : '-'
              %td #{due_date}
              %td #{h[:status].capitalize}
              %td #{number_with_precision(h[:amount].to_f, :precision => 2)}
              %td
                = link_to "PDF", "/getup/billing/#{h[:number]}.pdf"